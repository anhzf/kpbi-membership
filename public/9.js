(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{U8xY:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),a=r.n(n);function i(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function s(t){i(o,n,a,s,c,"next",t)}function c(t){i(o,n,a,s,c,"throw",t)}s(void 0)}))}}var s={name:"MyProfile",data:function(){return{profileLoading:!1,profileData:{}}},computed:{currentUserId:function(){return this.$store.getters.userId},pageTitle:function(){var t,e,r,n;return"".concat(null!==(t=this.profileData.jenjang)&&void 0!==t?t:""," ").concat(null!==(e=this.profileData.nama_prodi)&&void 0!==e?e:""," ").concat(null!==(r=null===(n=this.profileData.pt)||void 0===n?void 0:n.lengkap)&&void 0!==r?r:"")}},methods:{getProfileData:function(){var t=this;return o(a.a.mark((function e(){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.profileLoading=!0,e.prev=1,e.next=4,window.axios("/api/kpbi/profile");case 4:r=e.sent,n=r.data,t.profileData=n,"warn"in n&&t.$emit("notice",{message:n.warn,type:"warning"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.$emit("noticeError",e.t0);case 13:t.profileLoading=!1;case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},save:function(t){var e=this;return o(a.a.mark((function r(){var n,i,o,s,c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.bio,i=t.newImg,e.$store.commit("contentLoading",!0),r.prev=2,r.next=5,window.axios.put("/api/kpbi/profile",n);case 5:o=r.sent,e.$emit("notice",{message:o.data.message,type:"success"}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),e.$emit("noticeError",r.t0);case 12:if(!i.pt){r.next=24;break}return(s=new FormData).append("pt_img",i.pt),r.prev=15,r.next=18,window.axios.post("/api/kpbi/profile/pt-image",s,{"Content-Type":"multipart/form-data"});case 18:r.sent,r.next=24;break;case 21:r.prev=21,r.t1=r.catch(15),e.$emit("noticeError",r.t1);case 24:if(!i.kaprodi){r.next=36;break}return(c=new FormData).append("kaprodi_img",i.kaprodi),r.prev=27,r.next=30,window.axios.post("/api/kpbi/profile/kaprodi-image",c,{"Content-Type":"multipart/form-data"});case 30:r.sent,r.next=36;break;case 33:r.prev=33,r.t2=r.catch(27),e.$emit("noticeError",r.t2);case 36:e.getProfileData(),e.$store.commit("contentLoading",!1);case 38:case"end":return r.stop()}}),r,null,[[2,9],[15,21],[27,33]])})))()}},mounted:function(){this.getProfileData()},watch:{currentUserId:function(){this.getProfileData()}},components:{ProfileCard:r("SJBf").a}},c=r("KHd+"),p=Object(c.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",{attrs:{fluid:""}},[e("v-row",{attrs:{justify:"center"}},[e("h1",{staticClass:"text-h5 my-6"},[this._v("\r\n      "+this._s(this.pageTitle)+"\r\n    ")])]),this._v(" "),e("v-row",{attrs:{justify:"center"}},[e("profile-card",{attrs:{"profile-data":this.profileData,"is-loading":this.profileLoading,"can-edit":""},on:{"profile-update":this.save}})],1)],1)}),[],!1,null,null,null);e.default=p.exports}}]);